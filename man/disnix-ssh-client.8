.TH "disnix-ssh-client" "8" "June 2009" "Disnix" "System administration tools"
.SH NAME
disnix\-ssh\-client \- Provides access to the disnix-service through a SSH interface
.SH SYNOPSIS
.B disnix\-ssh\-client
{[-t | --target] hostname[:port]} 
{operation}
[
.B options
]
derivations
.PP
.SH DESCRIPTION
The command \fBdisnix\-ssh\-client\fR provides remote access to a \fBdisnix\-service\fR instance running
on a machine in the network by using a SSH connection. This allows the user to perform remote deployment
operations on a target machine through SSH.
.PP
Because this command uses \fBssh\fR to connect to the target machine, for every operation the user has
to provide a password. If this bothers you, have a look at \fBssh\-agent\fR.
.PP
In most cases this command is not used directly, but is used by specifying the \fB\-\-interface\fR option
for a Disnix command-line utility (such as \fBdisnix\-env\fR) or by setting the \fBDISNIX_CLIENT_INTERFACE\fR
environment variable. By using one of those properties, the Disnix tools will use the given interface instead
of the standard \fBdisnix\-client\fR which only provides loopback access.
.SH OPERATIONS
.TP
\fB\-\-import\fR
Imports a given closure into the Nix store of the target machine. Optionally, it transfers the closure from this machine
to the target machine.
.TP
\fB\-\-export\fR
Exports the closure of a given Nix store path of the target machine into a file, and optionally downloads it.
.TP
\fB\-\-print\-invalid\fR
Prints all the paths that are not valid in the Nix store of the target machine.
.TP
\fB\-r\fR, \fB\-\-realise\fR
Realises the given store derivation on the target machine.
.TP
\fB\-\-set\fR
Creates a Disnix profile only containing the given derivation on the target machine.
.TP
\fB\-q\fR, \fB\-\-query\-installed\fR
Queries all the installed services on the given target machine.
.TP
\fB\-\-query\-requisites\fR
Queries all the requisites (intra-dependencies) of the given services on the target machine.
.TP
\fB\-\-collect\-garbage\fR
Collects garbage on the given target machine.
.TP
\fB\-\-activate\fR
Activates the given service on the target machine.
.TP
\fB\-\-deactivate\fR
Deactivates the given service on the target machine.
.TP
\fB\-\-lock\fR
Acquires a lock on a Disnix profile of the target machine.
.TP
\fB\-\-unlock\fR
Release the lock on a Disnix profile of the target machine.

.SH OPTIONS
.TP
\fB\-t\fR, \fB\-\-target\fR
Specifies the hostname and optional port number of the SSH server used to connect to the target machine

.SH Import operation
.TP
\fB\-\-localfile\fR
Specifies that the given closure is stored locally, so that it will be transfered to the target machine first.
.TP
\fB\-\-remotefile\fR
Specifies that the given closure is stored remotely, so that it does not have to be transfered to the target machine.

.SH Export operation
.TP
\fB\-\-localfile\fR
Specifies that the exported closure should be stored locally. This option does not download the closure.
.TP
\fB\-\-remotefile\fR
Specifies that the exported closure should be stored remotely. This option downloads the closure from the target machine.

.SH Set operation/Query installed operation
.TP
\fB\-p\fR, \fB\-\-profile\fR
Specifies the name of the profile that should be used. Defaults to: default.

.SH Collect garbage operation
.TP
\fB\-d\fR, \fB\-\-delete\-old\fR
Specifies that also the older generations of the profiles have to be deleted.

.SH Activation/Deactivation operation
.TP
\fB\-\-type\fR
Specifies the activation module that should be used, such as \fBecho\fR or \fBprocess\fR.
.TP
\fB\-\-arguments\fR
Specifies the arguments passed to the activation module, which is a string with key=value pairs.

.SH Lock/Unlock operation
.TP
\fB\-p\fR, \fB\-\-profile\fR
Specifies the name of the profile that should be used. Defaults to: default.

.SH ENVIRONMENT VARIABLES
.TP
\fBSSH_OPTS\fR
Additional properties which are passed to the \fBssh\fR command.
.SH SEE ALSO
.BR disnix-client (8),
.BR disnix-service (8),
.BR disnix-env (8),
.BR ssh (1),
.BR ssh-agent (1)
.SH AUTHOR
Sander van der Burg <s.vanderburg@tudelft.nl>
